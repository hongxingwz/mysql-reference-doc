# 12.2 Type Conversion in Expression Evalutation

当操作符用来操作两个不同类型的操作数时，会发生类型转换使操作数相兼容。一些转换是隐式发生的。例如，MySQL自动的将数值转化为字符如果必要，反之亦然

```
mysql> select concat(2, 'test');
+-------------------+
| concat(2, 'test') |
+-------------------+
| 2test             |
+-------------------+
1 row in set (0.00 sec)
```

也可以将数字转换为字符显示的使用CAST\(\)函数。转换隐匿的发生当使用CONCAT\(\)函数因为他期待string参数

```
mysql> SELECT 38.8, cast(38.8 as char);
+------+--------------------+
| 38.8 | cast(38.8 as char) |
+------+--------------------+
| 38.8 | 38.8               |
+------+--------------------+

mysql> select 38.8, concat(38.8);
+------+--------------+
| 38.8 | concat(38.8) |
+------+--------------+
| 38.8 | 38.8         |
+------+--------------+
1 row in set (0.00 sec)
```

参阅此节关于隐式将数值转换为字符的转换的字符集和modified rules that apply to CREATE TABLE ... SELECT 语句。

下面的规则描述了比较操作的转换发生的规则:

* 如果一个或两个参数都是NULL，比较返回的结果是NULL，除了NULL自身的&lt;=&gt;相等性比较操作。对于NULL&lt;=&gt;NULL,结果是true。不需要转换。

* 如果两个参数都是字符，则作为字符串比较。
* 如果两个参数都是整数，则他们作为整数比较。
* 十六进制的值将被看成二进制字符如果没有与数值比较
* 如果一个参数是TIMESTAMP或DATATIME列，其他的参数是常量，常量被转换为timestamp在比较执行之前。这比ODBC作的更友好。注意这在IN\(\)的参数中是不会这样做的！为了安全，永远使用完全的datetime, date, 或time字符串在做比较时。例如，在用BETWEEN的date或time参数时为了达到更好的效果，使用CAST\(\)显示的将值转换为渴望的值。
* 一个single-row从一个表或多个表返回的不被认为是常量。例如，如果一个子查询返回一个整数来合DATETIME值作比较，比较会把他们都作为整数比较。整数不会被转换为时间值。要将操作数作为DATETIME值比较，使用CAST\(\)来显示的将子查询的值转换为DATETIME
* 如果一个参数是decimal值，比较取决于另一个参数。如果另一个参数是一个decimal或intege。如果另一个参数是浮点类型，则会作为浮点类型比较
* 剩下的其他情况，参数都作为浮点类型比较





